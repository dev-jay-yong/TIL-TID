# 함수형 프로그래밍이란?

---
### 1. 함수형 프로그래밍
함수형 프로그래밍은 절차 지향이나, 객체지향과 같은 하나의 프로그래밍 패러다임이다. 
자료처리를 할 때 수학적 함수(function)의 계산으로 취급하고 상태와 가변 데이터를 최대한 활용하지 않는 패러다임이다.
함수형 프로그래밍의 대표적인 언어는 <b>클로저, 스칼라, 하스켈</b>등이 있다.

> 잠시 당신이 나무꾼이라고 가정해보자. 당신은 숲에서 가장 좋은 도끼를 가지고 있고, 그래서 가장 일 잘하는 나무꾼이다.
> 그런데 어느 날 누가 나타나서 나무를 자르는 새로운 패러다임인 전기톱을 알리고 다닌다. 
> 이 사람이 무척 설득력이 있어서 당신은 사용하는 방법도 모르면서 전기톱을 사게 된다.
> 당신은 여태껏 했던 방식대로 시동을 걸지도 않고 전기톱으로 나무를 마구 두들겨댄다.
> 곧 당신은 이 새로운 전기톱은 일시적인 유행일 뿐이라고 단정하고 다시 도끼를 쓰기 시작한다.
> 그때 누군가 나타나서 <b>전기톱의 시동 거는 법</b>을 가르쳐 준다. 
> — 닐포드 , “함수형 사고”

함수형 프로그래밍은 객체 지향또는 절차 지향 프로그래밍과 다른 새로운 방식이다.

파이썬은 함수형 프로그래밍 언어가 아니기때문에 FP (함수형 프로그래밍)를 100% 사용하지는 못할 것이다.
하지만 절차지향프로그래밍과 객체지향프로그래밍과는 다른 방식의 사고를 요하는 프로그래밍 패러다임이기 때문에
<b>다양한 사고방식 및 유연한 문제해결</b>에 도움을 줄 것이라고 생각한다.

---
### 2. 함수형 프로그래밍의 특징
#### 순수 함수 (Pure Function)
* 출력은 매개변수에만 의존되며, 외부 상태에 상관없다
* 함수 내부에서 인자의 값을 변경 하거나 프로그램 상태를 변경하는 등의 사이드이펙트가 없다(외부내용을 수정하지않는다)
* 동일한 입력에는 항상 동일한 결과를 반환해야 한다.

#### 비상태, 불변성 (Stateless, Immutability)
* 함수형 프로그래밍에서의 데이터는 변하지 않는 불변성을 유지하여야만 한다.
* 데이터의 변경이 필요한 경우, 원본 데이터 구조를 변경하지 않고 그 <b>데이터의 복사본을 만들어 변경한 뒤 변경한 복사본을 사용해 작업을 진행</b>한다.

#### 1급 객체와 고차함수 (First-class, Higher-order functions)
함수형 프로그래밍에서는 함수가 1급 객체가 된다. 아래는 1급 객체의 특징이다.
* 변수나 데이터 구조안에 담을 수 있다.
* 파라미터로 값을 전달 할 수 있다.
* 반환값으로 사용할 수 있다.
* 할당에 사용된 이름과 관계없이 고유한 구별이 가능하다.
* 동적으로 property 할당이 가능하다.

또한 함수형 프로그래밍은 고차 함수의 특징을 가지게 되는데 해당하는 특징은 다음과 같다.
* 함수를 인자로써 전달 할 수 있어야 한다.
* 함수의 반환 값으로 또 다른 함수를 사용 할 수 있다.

---
아래에는 함수형 프로그래밍을 설명하기 위해 간단하게 코드를 작성해보았다.
```python
# 1번 케이스
b = 100
def sum(a):
    global b
    result = a + b
    b += 10
    return result

print(sum(100)) # 결과 - 200
print(b) # 결과 110

b = 10
print(sum(100)) # 결과 110

# 2번 케이스 (High Order Function)
def high_function(f, a, b):
    return f(a,b)

def add(a, b):
    return a+b

def div(a, b):
    return a/b

print(high_function(100, 100)) # 결과 200

print(high_function(100, 10)) # 결과 110

# 3번 케이스 (Closure)

value = 100
def func(a):
    value_copy = value
    def add(b):
        return value_copy + a + b
    return add

add_function = func(100)
value = 10
print(add_function(10)) # 결과 210
```
### 1번케이스
우선 1번 케이스 같은 경우는 함수형 프로그래밍이 아니다. 
크게 두가지 이유가 있는데 우선 첫번째 이유는 <b>같은 input 값 100에 대하여 첫번째 결과는 200, 두번째 결과는 110으로 다르다.</b>
두번째 이유는 sum 함수로 인해서 <b>외부 변수인 b의 값이 100에서 110으로 바뀌었다.</b>

즉 1번케이스는 순수함수가 아니기때문에 함수형 프로그래밍에 위배된다.

### 2번 케이스
2번 케이스는 최상위 함수에서 특정 기능을 사용하는 함수와 인자를 호출하는 방식이다. 결과만 보면 1번케이스와 같아서 함수형 프로그래밍이 아닌 거 같지만 2번케이스는 함수형 프로그래밍이 맞다.
이유는 input 값이 다르기때문에 결과가 각각 200과 110이 나온것이고 어떠한 외부 변수에도 영향을 주지 않는다. 즉 순수 함수라고 볼 수 있다.

### 3번 케이스
3번 케이스 같은 경우는 함수에서 데이터를 저장하는 경우이다.
흔히 클로저라고 부르는 이 구조는 중간에 <b>value 변수에 값이 바뀌었음에도 함수에 복사하여 저장해놓은 value_copy 변수 기준으로 연산</b>이 이루어지기 때문에
동일한 input값에 동일한 output값을 갖게 된다. 함수형 프로그래밍의 특징 중 불변성에 관한 내용을 대표하는 케이스인 셈이다.

---
### 3. 파이썬에서 함수형 프로그래밍의 장단점
#### 장점
1. 높은 수준의 추상화 제공
2. 함수 단위의 코드 재사용 수월
3. 불변성을 지향하기 때문에 프로그램의 동작 예측이 쉬움
4. 아직 구현되지 않은 기능이 있더라도 해당 기능의 시그니쳐(signiture)를 통해 함수를 받아서 조합하여 사용 가능

#### 단점
1. tail recursion optimnization (꼬리 재귀를 만들 시 자동으로 메모리공간을 최적화 시켜주는 기능)의 부재
2. immutable data을 직접 만들어야함
3. 느림
4. 모든 함수가 순수할 수 없음
5. 순수함수를 구현하기 위해서 코드의 가독성이 좋지 않을 수 있음
6. 함수형 프로그래밍에서 for문을 재귀함수로 대체하는 과정에 무한 루프에 빠질 수 있음
